<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>City Sound Explorer</title>
    <style>
        :root {
            --background:   #1f2d3d;
            --card-bg:      rgba(31,45,61,0.85);
            --primary:      #4ecca3;
            --secondary:    #30638e;
            --accent:       #c7f9cc;
            --text:         #e8e9eb;
            --text-muted:   #a2a1a1;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }
        html, body {
            height: 100%;
        }
        body {
            background-color: var(--background);
            color: var(--text);
            min-height: 100vh;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow-x: hidden;
        }
        .app-container {
            width: 100%;
            max-width: 1400px;
            padding: 16px;
            display: flex;
            flex-direction: column;
            gap: 24px;
            flex: 1 1 auto;
            height: 100vh;
        }
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        .logo-icon {
            width: 2.5rem;
            height: 2.5rem;
            fill: var(--accent);
            filter: drop-shadow(0 0 8px rgba(91, 157, 245, 0.3));
            animation: pulse 2s infinite ease-in-out;
        }
        .logo h1 {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(to right, var(--accent), #a5f3fc);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 10px rgba(91, 157, 245, 0.2);
        }
        .help-button {
            background: transparent;
            border: none;
            cursor: pointer;
            color: var(--text-muted);
            display: flex;
            align-items: center;
            justify-content: center;
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            transition: all 0.2s ease;
        }
        .help-button:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text);
        }
        .help-button svg {
            width: 1.5rem;
            height: 1.5rem;
        }
        main {
            display: grid;
            grid-template-columns: 20% 80%;
            gap: 24px;
            flex: 1 1 auto;
            height: 100%;
            min-height: 0;
        }
        .city-list {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 2rem;
            padding: 32px 24px;
            display: flex;
            flex-direction: column;
            gap: 24px;
            height: 100%;
            min-height: 0;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.25);
        }
        .city-list h2 {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 2rem;
            color: var(--accent);
            letter-spacing: 1px;
        }
        .city-button {
            background: transparent;
            border: none;
            border-radius: 1rem;
            padding: 1.5rem 1.25rem;
            cursor: pointer;
            text-align: left;
            color: var(--text-muted);
            display: flex;
            align-items: center;
            gap: 1.25rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 1.25rem;
            position: relative;
            overflow: hidden;
        }
        .city-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, var(--accent), transparent);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .city-button:hover::before {
            opacity: 0.1;
        }
        .city-button.active {
            background: rgba(91, 157, 245, 0.18);
            color: var(--accent);
            font-weight: 600;
            transform: translateX(16px) scale(1.05);
            box-shadow: 0 4px 24px rgba(91, 157, 245, 0.12);
        }
        .city-button.active::before {
            opacity: 0.2;
        }
        .city-button svg {
            width: 2rem;
            height: 2rem;
            transition: transform 0.3s ease;
        }
        .city-button:hover svg {
            transform: scale(1.2);
        }
        .city-button.active svg {
            transform: scale(1.2) rotate(5deg);
        }
        .city-display {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 2rem;
            overflow: hidden;
            position: relative;
            height: 100%;
            min-height: 0;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.25);
            display: flex;
            flex-direction: column;
        }
        .city-visual {
            flex: 1;
            width: 100%;
            position: relative;
            overflow: hidden;
        }
        .city-skyline {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            background-size: cover;
            background-position: center;
            transition: all 1.5s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0;
            transform: scale(1.1);
            filter: brightness(0.8);
        }
        .city-skyline.active {
            opacity: 1;
            transform: scale(1);
            filter: brightness(1);
            animation: flicker 3s infinite ease-in-out;
        }
        .city-skyline#tokyo-skyline::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(20, 20, 40, 0.55);
            pointer-events: none;
            z-index: 2;
        }
        .city-skyline#paris-skyline::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(20, 20, 40, 0.55);
            pointer-events: none;
            z-index: 2;
        }
        .city-skyline#nairobi-skyline::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(20, 20, 40, 0.55);
            pointer-events: none;
            z-index: 2;
        }
        .audio-wave {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 220px;
            z-index: 2;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding-bottom: 24px;
        }
        .wave-container {
            display: flex;
            align-items: flex-end;
            height: 180px;
            width: 90%;
            max-width: 900px;
            gap: 8px;
            opacity: 0.85;
            transition: all 1s cubic-bezier(0.4, 0, 0.2, 1);
            transform-origin: center;
        }
        .wave-container.tokyo {
            transform: scale(1.1);
            filter: hue-rotate(0deg);
        }
        .wave-container.paris {
            transform: scale(1.1);
            filter: hue-rotate(270deg) brightness(1.1) saturate(1.2);
        }
        .wave-container.nairobi {
            transform: scale(1.2);
            filter: hue-rotate(240deg);
        }
        .wave-bar {
            background: linear-gradient(to top, var(--accent), transparent);
            flex: 1;
            height: 30px;
            border-radius: 8px;
            transition: height 0.2s ease, background 1s ease;
            min-width: 12px;
        }
        .wave-bar.tokyo {
            background: linear-gradient(to top, #ff6b6b, transparent);
        }
        .wave-bar.paris {
            background: linear-gradient(to top, #e0aaff, #b388ff 60%, transparent 100%);
        }
        .wave-bar.nairobi {
            background: linear-gradient(to top, #ffe66d, transparent);
        }
        @keyframes wavePulse {
            0% { transform: scaleY(1); }
            50% { transform: scaleY(1.2); }
            100% { transform: scaleY(1); }
        }
        .wave-bar.pulse {
            animation: wavePulse 1.2s infinite ease-in-out;
        }
        .wave-bar.pulse:nth-child(2n) {
            animation-delay: 0.2s;
        }
        .wave-bar.pulse:nth-child(3n) {
            animation-delay: 0.4s;
        }
        .wave-bar.pulse:nth-child(4n) {
            animation-delay: 0.6s;
        }
        .wave-bar.pulse:nth-child(5n) {
            animation-delay: 0.8s;
        }
        .city-info {
            position: absolute;
            top: 2.5rem;
            left: 2.5rem;
            z-index: 3;
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0;
            transform: translateY(-20px);
            background: rgba(15, 23, 42, 0.7);
            padding: 2.5rem 2rem;
            border-radius: 1.5rem;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
        }
        .city-info.active {
            opacity: 1;
            transform: translateY(0);
        }
        .city-info h2 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
            transition: all 0.5s ease;
            background: linear-gradient(to right, var(--accent), #a5f3fc);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        .city-info p {
            font-size: 1.25rem;
            color: var(--text);
            max-width: 400px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
            transition: all 0.5s ease;
            line-height: 1.6;
        }
        .controls {
            background: rgba(15, 23, 42, 0.92);
            backdrop-filter: blur(10px);
            padding: 32px 32px 24px 32px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 32px;
            border-top: 1px solid rgba(255, 255, 255, 0.08);
            z-index: 3;
            border-radius: 0 0 2rem 2rem;
        }
        .play-pause {
            background: var(--primary);
            border: none;
            width: 4.5rem;
            height: 4.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 4px 24px rgba(78, 204, 163, 0.18);
        }
        .play-pause:hover {
            background: var(--secondary);
        }
        .play-pause svg {
            width: 2.5rem;
            height: 2.5rem;
            fill: white;
        }
        .volume-control {
            display: flex;
            align-items: center;
            gap: 2rem;
            flex: 1;
        }
        .volume-icon {
            color: var(--text-muted);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .volume-icon svg {
            width: 1.25rem;
            height: 1.25rem;
        }
        .volume-slider {
            flex: 1;
            -webkit-appearance: none;
            appearance: none;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            outline: none;
            cursor: pointer;
        }
        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--accent);
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .volume-slider::-webkit-slider-thumb:hover {
            background: var(--primary);
            transform: scale(1.2);
        }
        .city-time {
            color: var(--text-muted);
            font-size: 1.25rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        .city-time svg {
            width: 1rem;
            height: 1rem;
        }
        .notification {
            position: fixed;
            top: 2rem;
            right: 2rem;
            left: auto;
            bottom: auto;
            transform: translateY(-100px);
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            padding: 1rem 1.5rem;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
            z-index: 100;
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            opacity: 0;
        }
        .notification.show {
            transform: translateY(0);
            opacity: 1;
        }
        .notification-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1rem;
        }
        .notification-icon svg {
            width: 2rem;
            height: 2rem;
            color: var(--accent);
            fill: var(--accent);
            flex-shrink: 0;
        }
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        .modal.show {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            background: var(--card-bg);
            border-radius: 1rem;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            padding: 2rem;
            position: relative;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
        }
        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: transparent;
            border: none;
            color: var(--text-muted);
            width: 2rem;
            height: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border-radius: 50%;
            transition: all 0.2s ease;
        }
        .modal-close:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text);
        }
        .modal-close svg {
            width: 1.25rem;
            height: 1.25rem;
        }
        .modal-content h2 {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            color: var(--accent);
        }
        .modal-content h3 {
            font-size: 1.25rem;
            margin: 1.5rem 0 0.75rem;
            color: var(--text);
        }
        .modal-content p {
            margin-bottom: 1rem;
            line-height: 1.6;
            color: var(--text-muted);
        }
        .modal-content ul {
            margin-bottom: 1rem;
            padding-left: 1.5rem;
        }
        .modal-content li {
            margin-bottom: 0.5rem;
            color: var(--text-muted);
        }
        .modal-content .feature-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }
        .feature-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 1rem;
            border-radius: 0.5rem;
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
        }
        .feature-icon {
            color: var(--accent);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        .feature-icon svg {
            width: 1.25rem;
            height: 1.25rem;
        }
        .feature-text h4 {
            font-size: 1rem;
            margin-bottom: 0.25rem;
            font-weight: 500;
        }
        .feature-text p {
            font-size: 0.875rem;
            margin-bottom: 0;
        }
        @media (max-width: 1024px) {
            main {
                grid-template-columns: 1fr;
                display: flex;
                flex-direction: column;
                height: auto;
            }
            .city-list {
                flex-direction: row;
                gap: 12px;
                padding: 16px 8px;
                border-radius: 1rem;
                width: 100%;
                min-width: 0;
                margin-bottom: 16px;
                height: auto;
            }
            .city-display {
                height: 480px;
                border-radius: 1rem;
                width: 100%;
                min-width: 0;
            }
            .audio-wave {
                height: 120px;
            }
            .wave-container {
                height: 80px;
                max-width: 400px;
            }
            .controls {
                padding: 16px 8px;
                border-radius: 0 0 1rem 1rem;
                flex-direction: column;
                gap: 16px;
                align-items: stretch;
            }
            .city-info {
                top: 1rem;
                left: 1rem;
                padding: 1.5rem 1rem;
                border-radius: 1rem;
            }
        }
        @media (max-width: 600px) {
            html, body {
                width: 100vw;
                min-width: 0;
                height: 100vh;
                overflow-x: hidden;
            }
            .app-container {
                padding: 0;
                max-width: 100vw;
                width: 100vw;
                min-width: 0;
                height: 100vh;
                gap: 8px;
            }
            header {
                flex-direction: row;
                align-items: flex-start;
                width: 100vw;
                min-width: 0;
                padding: 0.5rem 0.5rem 0.5rem 0.5rem;
                box-sizing: border-box;
            }
            .logo h1 {
                font-size: 1.3rem;
                word-break: break-word;
            }
            main {
                display: flex;
                flex-direction: column;
                width: 100vw;
                min-width: 0;
                height: 100%;
                gap: 8px;
            }
            .city-list {
                flex-direction: column;
                gap: 6px;
                padding: 6px 2px;
                border-radius: 0.5rem;
                font-size: 1rem;
                width: 100vw;
                min-width: 0;
                margin-bottom: 0;
                height: auto;
                box-sizing: border-box;
            }
            .city-list h2 {
                font-size: 1.1rem;
                margin-bottom: 0.5rem;
            }
            .city-button {
                font-size: 0.95rem;
                padding: 0.6rem 0.4rem;
            }
            .city-display {
                height: auto;
                min-height: 220px;
                border-radius: 0.5rem;
                width: 100vw;
                min-width: 0;
                box-sizing: border-box;
            }
            .city-visual {
                min-height: 120px;
            }
            .audio-wave {
                height: 36px;
                min-height: 24px;
                padding-bottom: 6px;
            }
            .wave-container {
                height: 24px;
                max-width: 98vw;
                gap: 1px;
            }
            .wave-bar {
                min-width: 4px;
                border-radius: 2px;
            }
            .controls {
                padding: 2px 2px 2px 2px;
                border-radius: 0 0 0.5rem 0.5rem;
                flex-direction: column;
                gap: 4px;
                width: 100vw;
                min-width: 0;
                box-sizing: border-box;
                background: rgba(15, 23, 42, 0.98);
            }
            .play-pause {
                width: 2.2rem;
                height: 2.2rem;
                min-width: 2.2rem;
                min-height: 2.2rem;
            }
            .play-pause svg {
                width: 1.1rem;
                height: 1.1rem;
            }
            .volume-control {
                gap: 0.2rem;
            }
            .volume-slider {
                height: 6px;
            }
            .city-time {
                font-size: 0.85rem;
                gap: 0.2rem;
            }
            .city-time svg {
                width: 0.9rem;
                height: 0.9rem;
            }
            .city-info {
                top: 0.3rem;
                left: 0.3rem;
                padding: 0.5rem 0.3rem;
                border-radius: 0.3rem;
                max-width: 95vw;
            }
            .city-info h2 {
                font-size: 1rem;
            }
            .city-info p {
                font-size: 0.8rem;
            }
            .notification {
                top: 0.3rem;
                right: 0.3rem;
                padding: 0.3rem 0.5rem;
                font-size: 0.9rem;
                max-width: 95vw;
            }
            .notification-icon svg {
                width: 1rem;
                height: 1rem;
            }
            .modal-content {
                padding: 1rem 0.5rem;
                max-width: 98vw;
            }
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        .bg-gradient {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 50% 50%, rgba(91, 157, 245, 0.1), transparent 70%);
            z-index: -1;
            opacity: 0.7;
        }
        .orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(60px);
            z-index: -1;
            opacity: 0.2;
        }
        .orb-1 {
            top: -100px;
            right: -100px;
            width: 300px;
            height: 300px;
            background: var(--accent);
            animation: float 20s infinite alternate ease-in-out;
        }
        .orb-2 {
            bottom: -150px;
            left: -100px;
            width: 400px;
            height: 400px;
            background: #4f46e5;
            animation: float 25s infinite alternate-reverse ease-in-out;
        }
        @keyframes float {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }
        @keyframes cityTransition {
            0% {
                transform: scale(1.1);
                opacity: 0;
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }
        .city-transition {
            animation: cityTransition 1.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        @keyframes flicker {
            0%,100% { opacity: 1; }
            50%     { opacity: 0.95; }
        }
    </style>
</head>
<body>
    <div class="bg-gradient"></div>
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="app-container">
        <header>
            <div class="logo">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="logo-icon">
                    <path d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"/>
                </svg>
                <h1>City Sound Explorer</h1>
            </div>
            <button class="help-button" id="help-button">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none"/>
                    <path d="M12 16h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <path d="M12 12a2 2 0 1 0-2-2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M12 14v-2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>
        </header>
        <main>
            <div class="city-list">
                <h2>Select a City</h2>
                <button class="city-button" data-city="tokyo">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
                    </svg>
                    Tokyo
                </button>
                <button class="city-button" data-city="paris">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
                    </svg>
                    Paris
                </button>
                <button class="city-button" data-city="nairobi">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
                    </svg>
                    Nairobi
                </button>
            </div>
            <div class="city-display">
                <div class="city-visual">
                    <div class="city-skyline" id="tokyo-skyline" style="background-image: url('https://images.unsplash.com/photo-1513407030348-c983a97b98d8?q=80&w=2072&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D')"></div>
                    <div class="city-skyline" id="paris-skyline" style="background-image: url('https://images.unsplash.com/photo-1502602898657-3e91760cbb34?q=80&w=1000')"></div>
                    <div class="city-skyline" id="nairobi-skyline" style="background-image: url('https://images.unsplash.com/photo-1611348524140-53c9a25263d6?q=80&w=1000')"></div>
                    <div class="audio-wave">
                        <div class="wave-container">
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                        </div>
                    </div>
                    <div class="city-info">
                        <h2 id="city-name">Select a City</h2>
                        <p id="city-description">Choose a city from the list to explore its unique soundscape</p>
                    </div>
                </div>
                <div class="controls">
                    <button class="play-pause" id="play-pause">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path fill-rule="evenodd" d="M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.348c1.295.712 1.295 2.573 0 3.285L7.28 19.991c-1.25.687-2.779-.217-2.779-1.643V5.653z" clip-rule="evenodd" />
                        </svg>
                    </button>
                    <div class="volume-control">
                        <div class="volume-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" />
                            </svg>
                        </div>
                        <input type="range" min="0" max="1" step="0.01" value="0.7" class="volume-slider" id="volume-slider">
                    </div>
                    <div class="city-time">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <span id="current-time">--:--</span>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <div class="notification" id="notification">
        <div class="notification-icon">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z" />
            </svg>
        </div>
        <div class="notification-content">
            <h3 id="notification-title">Notification Title</h3>
            <p id="notification-message">Notification message here</p>
        </div>
    </div>
    <div class="modal" id="help-modal">
        <div class="modal-content">
            <button class="modal-close" id="close-modal">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <h2>Welcome to City Sound Explorer</h2>
            <p>Experience the unique atmosphere of cities around the world through immersive soundscapes. This app lets you travel sonically to different urban environments, each with its distinctive audio signature.</p>
            <div class="feature-list">
                <div class="feature-item">
                    <div class="feature-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3" />
                        </svg>
                    </div>
                    <div class="feature-text">
                        <h4>Authentic Soundscapes</h4>
                        <p>Each city features carefully curated ambient sounds that capture its essence.</p>
                    </div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" />
                        </svg>
                    </div>
                    <div class="feature-text">
                        <h4>Visual Elements</h4>
                        <p>Visual representations of each city complement the audio experience.</p>
                    </div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4" />
                        </svg>
                    </div>
                    <div class="feature-text">
                        <h4>Adjustable Volume</h4>
                        <p>Control the sound level to create your perfect ambient experience.</p>
                    </div>
                </div>
            </div>
            <h3>How to Use</h3>
            <ul>
                <li>Select a city from the list on the left to load its soundscape</li>
                <li>Use the play/pause button to control playback</li>
                <li>Adjust the volume slider to your preferred level</li>
                <li>Switch between cities at any time - the transition will be seamless</li>
            </ul>
            <h3>About This Project</h3>
            <p>City Sound Explorer is designed to provide an immersive audio experience that transports you to different urban environments around the world. Whether you're looking for background ambiance while working, studying, or simply want to experience the atmosphere of a distant city, these soundscapes create a sensory connection to places near and far.</p>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const cities = {
                tokyo: {
                    name: "Tokyo",
                    description: "The bustling metropolis of Japan with its unique blend of traditional culture and futuristic technology",
                    soundFile: "https://cdn.freesound.org/previews/171/171176_2558789-lq.mp3",
                    timeZone: "Asia/Tokyo"
                },
                paris: {
                    name: "Paris", 
                    description: "The City of Light with its café culture, street musicians, and romantic ambiance",
                    soundFile: "https://cdn.freesound.org/previews/49/49938_34103-lq.mp3",
                    timeZone: "Europe/Paris"
                },
                nairobi: {
                    name: "Nairobi",
                    description: "Kenya's vibrant capital with its mix of urban energy and natural beauty",
                    soundFile: "https://cdn.freesound.org/previews/469/469703_6253486-lq.mp3",
                    timeZone: "Africa/Nairobi"
                }
            };
            const cityButtons = document.querySelectorAll('.city-button');
            const cityName = document.getElementById('city-name');
            const cityDescription = document.getElementById('city-description');
            const playPauseButton = document.getElementById('play-pause');
            const volumeSlider = document.getElementById('volume-slider');
            const currentTimeDisplay = document.getElementById('current-time');
            const notification = document.getElementById('notification');
            const notificationTitle = document.getElementById('notification-title');
            const notificationMessage = document.getElementById('notification-message');
            const helpButton = document.getElementById('help-button');
            const helpModal = document.getElementById('help-modal');
            const closeModalButton = document.getElementById('close-modal');
            const waveBars = document.querySelectorAll('.wave-bar');
            let audioContext;
            let audioElement;
            let gainNode;
            let analyser;
            let dataArray;
            let currentCity = null;
            let isPlaying = false;
            let animationFrameId;
            function initAudio() {
                try {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    gainNode = audioContext.createGain();
                    gainNode.gain.value = volumeSlider.value;
                    analyser = audioContext.createAnalyser();
                    analyser.fftSize = 256;
                    const bufferLength = analyser.frequencyBinCount;
                    dataArray = new Uint8Array(bufferLength);
                    gainNode.connect(analyser);
                    analyser.connect(audioContext.destination);
                    showNotification("Audio Ready", "Click on a city to start exploring!");
                } catch (e) {
                    console.error("Audio initialization failed:", e);
                    showNotification("Audio Error", "Failed to initialize audio. Please try again or use a different browser.");
                }
            }
            function loadCity(cityKey) {
                if (!cities[cityKey]) return;
                const city = cities[cityKey];
                cityName.textContent = city.name;
                cityDescription.textContent = city.description;
                const cityInfo = document.querySelector('.city-info');
                cityInfo.classList.remove('active');
                setTimeout(() => {
                    cityInfo.classList.add('active');
                }, 50);
                const waveContainer = document.querySelector('.wave-container');
                const waveBars = document.querySelectorAll('.wave-bar');
                waveContainer.classList.remove('tokyo', 'paris', 'nairobi');
                waveBars.forEach(bar => {
                    bar.classList.remove('tokyo', 'paris', 'nairobi', 'pulse');
                });
                setTimeout(() => {
                    waveContainer.classList.add(cityKey);
                    waveBars.forEach(bar => {
                        bar.classList.add(cityKey);
                        bar.classList.add('pulse');
                    });
                }, 300);
                cityButtons.forEach(button => button.classList.remove('active'));
                setTimeout(() => {
                    document.querySelector(`.city-button[data-city="${cityKey}"]`).classList.add('active');
                }, 300);
                document.querySelectorAll('.city-skyline').forEach(skyline => {
                    skyline.classList.remove('active');
                });
                const selectedSkyline = document.getElementById(`${cityKey}-skyline`);
                selectedSkyline.classList.add('city-transition');
                setTimeout(() => {
                    selectedSkyline.classList.add('active');
                    selectedSkyline.classList.remove('city-transition');
                }, 50);
                if (!audioContext) {
                    initAudio();
                }
                if (audioContext.state === 'suspended') {
                    audioContext.resume();
                }
                if (isPlaying) {
                    if (gainNode) {
                        gainNode.gain.cancelScheduledValues(audioContext.currentTime);
                        gainNode.gain.linearRampToValueAtTime(0, audioContext.currentTime + 0.5);
                    }
                    setTimeout(() => {
                        if (activeSource) {
                            try {
                                activeSource.stop();
                            } catch (e) {
                                console.log("Error stopping source in loadCity:", e);
                            }
                            activeSource = null;
                        }
                        audioBuffer = null;
                        prepareAudio(city.soundFile);
                        showNotification("Now Playing", `Switching to ${city.name} sounds`);
                    }, 500);
                } else {
                    if (activeSource) {
                        try {
                            activeSource.stop();
                        } catch (e) {
                            console.log("Error stopping inactive source:", e);
                        }
                        activeSource = null;
                    }
                    audioBuffer = null;
                    prepareAudio(city.soundFile);
                    showNotification(city.name, "Click play to start listening to this city's sounds");
                }
                currentCity = cityKey;
                updateCityTime(city.timeZone);
                if (!timeInterval) {
                    timeInterval = setInterval(() => {
                        if (currentCity) {
                            updateCityTime(cities[currentCity].timeZone);
                        }
                    }, 60000);
                }
            }
            let audioBuffer = null;
            let activeSource = null;
            let timeInterval = null;
            function prepareAudio(soundFile) {
                fetch(soundFile)
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`HTTP error! Status: ${response.status}`);
                        }
                        return response.arrayBuffer();
                    })
                    .then(arrayBuffer => audioContext.decodeAudioData(arrayBuffer))
                    .then(buffer => {
                        audioBuffer = buffer;
                        if (isPlaying) {
                            playAudioBuffer();
                        }
                    })
                    .catch(error => {
                        console.error("Error loading sound:", error);
                        createDummyBuffer();
                    });
            }
            function createDummyBuffer() {
                const sampleRate = audioContext.sampleRate;
                const buffer = audioContext.createBuffer(2, sampleRate * 5, sampleRate);
                for (let channel = 0; channel < buffer.numberOfChannels; channel++) {
                    const data = buffer.getChannelData(channel);
                    for (let i = 0; i < data.length; i++) {
                        data[i] = (Math.random() * 2 - 1) * 0.05;
                    }
                }
                audioBuffer = buffer;
                if (isPlaying) {
                    playAudioBuffer();
                }
                showNotification("Audio Notice", "Using placeholder audio. Check that audio files are correctly set up.");
            }
            function playAudioBuffer() {
                if (!audioBuffer) return;
                if (activeSource) {
                    try {
                        activeSource.stop();
                    } catch (e) {
                        console.log("Error stopping previous source:", e);
                    }
                    activeSource = null;
                }
                const source = audioContext.createBufferSource();
                source.buffer = audioBuffer;
                source.loop = true;
                source.connect(gainNode);
                activeSource = source;
                gainNode.gain.setValueAtTime(0, audioContext.currentTime);
                source.start(0);
                gainNode.gain.linearRampToValueAtTime(
                    parseFloat(volumeSlider.value),
                    audioContext.currentTime + 1.5
                );
                visualize();
            }
            function fadeOutAndSwitchCity(city) {
                if (!gainNode) return;
                gainNode.gain.cancelScheduledValues(audioContext.currentTime);
                gainNode.gain.linearRampToValueAtTime(0, audioContext.currentTime + 1.0);
                setTimeout(() => {
                    if (activeSource) {
                        try {
                            activeSource.stop();
                        } catch (e) {
                            console.log("Error stopping source in fade:", e);
                        }
                        activeSource = null;
                    }
                    audioBuffer = null;
                    prepareAudio(city.soundFile);
                    showNotification("Now Playing", `Exploring the sounds of ${city.name}`);
                }, 1000);
            }
            function togglePlayPause() {
                if (!audioContext) {
                    initAudio();
                }
                if (audioContext.state === 'suspended') {
                    audioContext.resume();
                }
                if (!currentCity) {
                    showNotification("Select a City", "Please select a city first to play its sounds.");
                    return;
                }
                if (isPlaying) {
                    gainNode.gain.linearRampToValueAtTime(0, audioContext.currentTime + 0.5);
                    setTimeout(() => {
                        if (activeSource) {
                            activeSource.stop();
                            activeSource = null;
                        }
                    }, 500);
                    isPlaying = false;
                    cancelAnimationFrame(animationFrameId);
                    simulateWaveAnimation();
                } else {
                    isPlaying = true;
                    if (audioBuffer) {
                        playAudioBuffer();
                    } else {
                        prepareAudio(cities[currentCity].soundFile);
                    }
                    showNotification("Now Playing", `Exploring the sounds of ${cities[currentCity].name}`);
                }
                updatePlayPauseButton();
            }
            function updatePlayPauseButton() {
                if (isPlaying) {
                    playPauseButton.innerHTML = `
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path fill-rule="evenodd" d="M6.75 5.25a.75.75 0 01.75-.75H9a.75.75 0 01.75.75v13.5a.75.75 0 01-.75.75H7.5a.75.75 0 01-.75-.75V5.25zm7.5 0A.75.75 0 0115 4.5h1.5a.75.75 0 01.75.75v13.5a.75.75 0 01-.75-.75H15a.75.75 0 01-.75-.75V5.25z" clip-rule="evenodd" />
                        </svg>
                    `;
                } else {
                    playPauseButton.innerHTML = `
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path fill-rule="evenodd" d="M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.348c1.295.712 1.295 2.573 0 3.285L7.28 19.991c-1.25.687-2.779-.217-2.779-1.643V5.653z" clip-rule="evenodd" />
                        </svg>
                    `;
                }
            }
            function updateCityTime(timezone) {
                try {
                    const options = { hour: '2-digit', minute: '2-digit', timeZone: timezone };
                    const formatter = new Intl.DateTimeFormat('en-US', options);
                    currentTimeDisplay.textContent = formatter.format(new Date());
                } catch (e) {
                    console.error("Error updating city time:", e);
                    currentTimeDisplay.textContent = "--:--";
                }
            }
            function showNotification(title, message) {
                notificationTitle.textContent = title;
                notificationMessage.textContent = message;
                notification.classList.add('show');
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }
            function visualize() {
                if (!isPlaying) return;
                analyser.getByteFrequencyData(dataArray);
                const waveBars = document.querySelectorAll('.wave-bar');
                for (let i = 0; i < waveBars.length; i++) {
                    const index = Math.floor(i * dataArray.length / waveBars.length);
                    const value = dataArray[index];
                    const height = (value / 255) * 100;
                    waveBars[i].style.height = `${height || 5}px`;
                }
                animationFrameId = requestAnimationFrame(visualize);
            }
            function simulateWaveAnimation() {
                const waveBars = document.querySelectorAll('.wave-bar');
                waveBars.forEach((bar, index) => {
                    const randomHeight = isPlaying ? 30 : Math.random() * 12 + 5;
                    bar.style.height = `${randomHeight}px`;
                    if (!isPlaying) {
                        bar.classList.remove('pulse');
                    }
                });
                if (!isPlaying) {
                    setTimeout(simulateWaveAnimation, 200);
                }
            }
            cityButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const cityKey = this.getAttribute('data-city');
                    currentCity = cityKey;
                    loadCity(cityKey);
                });
            });
            playPauseButton.addEventListener('click', togglePlayPause);
            volumeSlider.addEventListener('input', function() {
                if (gainNode) {
                    const value = parseFloat(this.value);
                    gainNode.gain.cancelScheduledValues(audioContext.currentTime);
                    gainNode.gain.linearRampToValueAtTime(value, audioContext.currentTime + 0.1);
                }
            });
            helpButton.addEventListener('click', function() {
                helpModal.classList.add('show');
            });
            closeModalButton.addEventListener('click', function() {
                helpModal.classList.remove('show');
            });
            helpModal.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.remove('show');
                }
            });
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && helpModal.classList.contains('show')) {
                    helpModal.classList.remove('show');
                }
            });
            simulateWaveAnimation();
            loadCity('tokyo');
        });
    </script>
</body>
</html>
